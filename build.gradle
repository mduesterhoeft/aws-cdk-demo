plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.3.31'
    id "com.github.johnrengelman.shadow" version "5.0.0"
}

group 'com.de.md'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

def cdkVersion = "0.34.0"

dependencies {
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
    implementation "org.jetbrains.kotlin:kotlin-reflect"
    implementation "software.amazon.awscdk:cdk:$cdkVersion"
    implementation "software.amazon.awscdk:apigateway:$cdkVersion"
    implementation "software.amazon.awscdk:lambda:$cdkVersion"
    implementation "software.amazon.awscdk:dynamodb:$cdkVersion"

    implementation "com.amazonaws:aws-lambda-java-core:1.2.0"
    implementation "com.amazonaws:aws-lambda-java-events:2.2.6"
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}

shadowJar {
    baseName = 'aws-cdk-demo'
    classifier = null
    version = null
}

task synth(type: JavaExec) {
    classpath sourceSets.main.runtimeClasspath
    main = "de.md.SampleAppKt"
}